import matplotlib.pyplot as plt
import numpy as np

# python3 ex/n-bodies-base.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809303e+19, -5.433144927078428e+19, -7.048024726202113e+19, -8.666809633772313e+19, -
#                   1.028564309097248e+20, -1.1904317042429144e+20, -1.3521499034739219e+20, -1.513589802773831e+20, -1.6746669265218414e+20]
# saved_time: 11.985574007034302 Secondes

# python3 ex/n-bodies-base-v2.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809303e+19, -5.433144927078428e+19, -7.048024726202113e+19, -8.666809633772313e+19, -
#                   1.028564309097248e+20, -1.1904317042429141e+20, -1.3521499034739219e+20, -1.5135898027738314e+20, -1.6746669265218414e+20]
# saved_time: 9.351825714111328 Secondes

# mpirun - n 1 python3 ex/n-bodies-base-mpi.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809303e+19, -5.433144927078428e+19, -7.048024726202113e+19, -8.666809633772313e+19, -
#                   1.028564309097248e+20, -1.1904317042429144e+20, -1.3521499034739219e+20, -1.513589802773831e+20, -1.6746669265218414e+20]
# saved_time: 11.258503508 Secondes

# mpirun - n 2 python3 ex/n-bodies-base-mpi.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809303e+19, -5.433144927078428e+19, -7.048024726202113e+19, -8.666809633772313e+19, -
#                   1.028564309097248e+20, -1.1904317042429144e+20, -1.3521499034739219e+20, -1.513589802773831e+20, -1.6746669265218414e+20]
# saved_time: 7.201099527 Secondes

# mpirun - n 4 python3 ex/n-bodies-base-mpi.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809303e+19, -5.433144927078428e+19, -7.048024726202113e+19, -8.666809633772313e+19, -
#                   1.028564309097248e+20, -1.1904317042429144e+20, -1.3521499034739219e+20, -1.513589802773831e+20, -1.6746669265218414e+20]
# saved_time: 4.299592884 Secondes

# mpirun - n 8 python3 ex/n-bodies-base-mpi.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809303e+19, -5.433144927078428e+19, -7.048024726202113e+19, -8.666809633772313e+19, -
#                   1.028564309097248e+20, -1.1904317042429144e+20, -1.3521499034739219e+20, -1.513589802773831e+20, -1.6746669265218414e+20]
# saved_time: 3.232063333 Secondes

# mpirun - n 1 python3 ex/n-bodies-base-mpi-v2.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809303e+19, -5.4331449270784295e+19, -7.048024726202113e+19, -8.666809633772316e+19, -
#                   1.028564309097248e+20, -1.1904317042429144e+20, -1.3521499034739222e+20, -1.513589802773832e+20, -1.674666926521842e+20]
# saved_time: 9.908218864 Secondes

# mpirun - n 2 python3 ex/n-bodies-base-mpi-v2.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809303e+19, -5.4331449270784295e+19, -7.048024726202113e+19, -8.666809633772316e+19, -
#                   1.028564309097248e+20, -1.1904317042429144e+20, -1.3521499034739222e+20, -1.5135898027738317e+20, -1.674666926521842e+20]
# saved_time: 7.695711312 Secondes

# mpirun - n 4 python3 ex/n-bodies-base-mpi-v2.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809302e+19, -5.433144927078428e+19, -7.048024726202113e+19, -8.666809633772313e+19, -
#                   1.0285643090972477e+20, -1.1904317042429141e+20, -1.3521499034739219e+20, -1.5135898027738314e+20, -1.6746669265218414e+20]
# saved_time: 5.766724931 Secondes

# mpirun - n 8 python3 ex/n-bodies-base-mpi-v2.py 1024 10
# saved_signature: [-2.215276240892086e+19, -3.822949557809302e+19, -5.433144927078428e+19, -7.048024726202113e+19, -8.666809633772313e+19, -
#                   1.0285643090972477e+20, -1.1904317042429141e+20, -1.3521499034739219e+20, -1.5135898027738314e+20, -1.6746669265218414e+20]
# saved_time: 4.667433586 Secondes


labels = ['base', 'base-v2', 'base-mpi', 'base-mpi-v2']
one_proc = [11.985574007034302, 9.351825714111328,
            11.258503508, 9.908218864]
two_proc = [0, 0, 7.201099527, 7.695711312]
four_proc = [0, 0, 4.299592884, 5.766724931]
eight_proc = [0, 0, 3.232063333, 4.667433586]

x = np.arange(len(labels))
width = 0.15

fig, ax = plt.subplots()
rects1 = ax.bar(x - width - width / 2, one_proc, width, label='1')
rects2 = ax.bar(x - width / 2, two_proc, width, label='2')
rects3 = ax.bar(x + width / 2, four_proc, width, label='4')
rects4 = ax.bar(x + width + width / 2, eight_proc, width, label='8')

ax.set_ylabel('Secondes')
ax.set_title('Temps en secondes par programme et nombre d\'instance')
ax.set_xticks(x, labels)
ax.legend()

ax.bar_label(rects1, padding=3)
ax.bar_label(rects2, padding=3)
ax.bar_label(rects3, padding=3)
ax.bar_label(rects4, padding=3)

fig.tight_layout()

plt.show()
